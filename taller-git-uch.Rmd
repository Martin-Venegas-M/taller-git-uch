---
title: "_Control de versiones: Git y GitHub"
date: "julio, 2021"
author: "" 
output:
  xaringan::moon_reader:
    lib_dir: libs
    nature:
      ratio: '16:9'
      countIncrementalSlides: false
      beforeInit: "https://jciturras.github.io/ayudantia-sol3051/slides/00-intro-r/macros.js"
      slideNumberFormat: |
        <div class="progress-bar-container">
          <div class="progress-bar" style="width: calc(%current% / %total% * 100%);">
          </div>
        </div>
    css: ["https://jciturras.github.io/ayudantia-sol3051/slides/00-intro-r/xaringan-coes.css","https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.7.0/animate.min.css"]
    seal: false # esto omite title slide autom√°tica  
---
layout: true
class: animated, fadeIn

---
class: inverse, left, middle

# _Control de versiones: Git y GitHub._


Mart√≠n Venegas M√°rquez


***
[Modelos Multinivel - SOC01133/MCS7174 ‚Ä¢ Primer Semestre 2025]()

<br>

#### Marzo, 2025

---
# Contenidos de la sesi√≥n 

.left-column[

**¬øQu√© es el control de versiones?**

1. Definiciones y analog√≠as

**¬øPor qu√© utilizar el control de versiones?**

1. Credibilidad

2. Eficiencia

]

.right-column[

**¬øC√≥mo utilizar el control de versiones?**

1. Git, Github y RStudio

2. Conceptos centrales

3. Aplicando lo aprendido
]
---
class: middle, center, inverse

# _¬øQu√© es el control de versiones?_

---
# Definiendo el control de versiones

.left-column[
> Un control de versiones es un **sistema** que **registra los cambios** realizados en un archivo o conjunto de archivos a lo largo del **tiempo**, de modo que puedas **recuperar** versiones espec√≠ficas m√°s adelante ([Git](https://git-scm.com/book/es/v2/Inicio---Sobre-el-Control-de-Versiones-Acerca-del-Control-de-Versiones))
]

.right-column[
> Los sistemas de control de versiones son un tipo de **software** que ayuda a hacer un **seguimiento de los cambios** realizados en el c√≥digo a lo largo del **tiempo**. A medida que un desarrollador edita el c√≥digo, el sistema de control de versiones toma una [foto] de los archivos. Despu√©s, guarda esa [foto] de forma permanente para que se pueda **recuperar** m√°s adelante si es necesario ([Microsoft](https://learn.microsoft.com/es-es/devops/develop/git/what-is-version-control))

]
![:scale 15%](images/git.png)
![:scale 15%](images/microsoft.png)
---

# Definiendo el control de versiones

- ** üí° Idea principal:** Un sistema que permite llevar un registro de los cambios efectuados a uno o m√°s archivos a trav√©s del tiempo.

- Google Docs y Microsoft Word como las formas m√°s conocidas de llevar un registro de cambios: control de cambios e historial de versiones.

- Lo m√°s com√∫n: usar el nombre de los archivos para denotar la versi√≥n.

![:scale 30%](images/googledocs.png)
![:scale 20%](images/word.png)
---
.center[![](images/versionhistory.png)]

---
.center[![:scale 90%](images/final2.jpg)]
---

.center[
![:scale 45%](images/final.jpg)
]
---
.center[
![:scale 55%](images/exit.jpg)
]
---
class: middle, center, inverse

# _¬øPor qu√© usar el control de versiones?_

---
class: middle, center, inverse

# _Primera raz√≥n: credibilidad_

---
# Crisis en la ciencia
.left-column[
* Ha sido entendida como un problema de **transparencia** en:
    * Dise√±os de investigaci√≥n 
    * Procedimientos de investigaci√≥n 
    * Apertura y acceso a materiales de investigaci√≥n
    
* Dentro de las motivos y consecuencias:

    * Problemas para replicar (o reproducir) resultados
    * Confianza en los resultados se pone en duda
]

.right-column[.center[

![:scale 80%](images/crisis.png)

[Baker (2016)](https://www.nature.com/articles/533452a)  
]
]
---
# Crisis en la ciencia
.left-column[
* Ha sido entendida como un problema de **transparencia** en:
    * Dise√±os de investigaci√≥n 
    * Procedimientos de investigaci√≥n 
    * Apertura y acceso a materiales de investigaci√≥n
    
* Dentro de las motivos y consecuencias:

    * Problemas para replicar (o reproducir) resultados
    * **Confianza en los resultados se pone en duda** ‚ùó
]

.right-column[.center[

![:scale 80%](images/crisis.png)

[Baker (2016)](https://www.nature.com/articles/533452a)  
]
]

---
# Pr√°cticas de investigaci√≥n 

* _Fabrication_, _Falsification_, _Plagiarism_ (Invenci√≥n, Falsificaci√≥n y Plagio - FPP)
* Pr√°cticas cuestionables de investigaci√≥n (QRP)
* Conducta Responsable de Investigaci√≥n (RCR)

.center[
![](images/ffp.png) 

Gradaci√≥n del comportamiento integro en investigaci√≥n. Imagen de [Steneck (2006).](https://link.springer.com/article/10.1007/PL00022268)]
---
# Caso de fraude: Diderik Stapel

.left-column[
* Prestigioso psicol√≥go social
* 137 art√≠culos publicados
* 54 art√≠culos retractados
* **Motivo:** 
    * Falsificaci√≥n y manipulaci√≥n de datos
* **Consecuencias:** 
    * Desvinculado de la Tilburg University
    * Se le reboc√≥ su t√≠tulo de doctorado
]

.right-column[
![](https://0901.static.prezi.com/preview/v2/rh5mrmwhqbzdet7bdbrw4tbijl6jc3sachvcdoaizecfr3dnitcq_3_0.png
)
] 

---
# Principios [mertonianos](https://www.panarchy.org/merton/science.html) de la ciencia

- **Universalismo:** La idea de que las afirmaciones cient√≠ficas deben estar sujetas criterios objetivos preestablecidos e impersonales.

- **Comunalismo:** Los hallazgos de la ciencia son propiedad com√∫n de la comunidad cient√≠fica y el progreso cient√≠fico depende de la comunicaci√≥n abierta y el intercambio.

- **Desinter√©s:** La ciencia deber√≠a limitar la influencia del sesgo tanto como sea posible y deber√≠a hacerse por el bien de la ciencia, m√°s que por inter√©s propio o poder.

- **Escepticismo organizado:** La necesidad de prueba o verificaci√≥n somete a la ciencia a m√°s escrutinio que cualquier otro campo.

---
.center[![:scale 85%](images/definitions.jpg)]
---
.center[![](images/reproducible.jpg)]
---
# ¬øC√≥mo avanzamos?

* Pr√°cticas de investigaci√≥n orientadas a la reproducibilidad:

  * Publicaci√≥n de datos (Dataverse, OSF)
  * C√≥digo de an√°lisis abierto (Github, OSF)
  * Uso de software libre y de c√≥digo abierto (R, Python, Markdown)
  * Protocolos de trabajo reproducible (TIER project)
  * Control de versiones (Git)

.center[

![](https://www.nap.edu/openbook/21915/xhtml/images/img-51-1.jpg)

]
---
# ¬øC√≥mo avanzamos?

* Pr√°cticas de investigaci√≥n orientadas a la reproducibilidad:

  * Publicaci√≥n de datos (Dataverse, OSF)
  * C√≥digo de an√°lisis abierto (Github, OSF)
  * Uso de software libre y de c√≥digo abierto (R, Python, Markdown)
  * Protocolos de trabajo reproducible (TIER project)
  * **Control de versiones (Git)** ‚úÖ

.center[

![](https://www.nap.edu/openbook/21915/xhtml/images/img-51-1.jpg)

]
---
class: middle, center, inverse

# _Segunda raz√≥n: eficiencia_

---
# Contexto: proyectos grandes/complejos

.left-column[
- **Trabajo en equipo:** distintas opiniones y formas de trabajar

- **Muchos archivos:** informes, _scripts de c√≥digo_, presentaciones, tablas etc.
]

.right-column[
- **Muchas decisiones que tomar:** sobre el dise√±o de investigaci√≥n, an√°lisis, exploraciones etc.

- **A trav√©s del tiempo:** prueba y error, cambios de opini√≥n, reiteraci√≥n.
]
.center[![:scale 60%](images/decs.png)]

---
## Bowers, J., & Voors, M. (2016)

.center[![:scale 60%](images/paper.png)]
---
# Mejor relaci√≥n con tu futuro yo

 (1) **El an√°lisis de datos es programaci√≥n**: Codear todo lo que se pueda codear, evitar trabajo manual (_copypaste_) y asi minimizar errores

(2) **Ning√∫n an√°lisis de datos es una isla por mucho tiempo:** No lo hacemos solo nosotros, eventualmente llega a otra persona. Comentar c√≥digo y documentar.

(3) **El territorio del an√°lisis de datos requiere mapas:** Debemos saber de d√≥nde vienen los datos y qu√© operaciones se hacen en qu√© set de datos. Organizaci√≥n de carpetas y nombres de archivos intuitiva.
---
class: inverse

# Mejor relaci√≥n con tu futuro yo

[(4) **El control de versiones previene el _clobbering_, reconcilia el historial y ayuda a organizar el trabajo: Evitar perdida de informaci√≥n y conflictos** ]()

- Es necesario saber qu√© versiones de archivos son nuevas, cu√°les son viejas y qu√© ha cambiado entremedio (_track changes_)

- **_Clobbering_:** cuando se elimina trabajo hecho por accidente o cuando se crean duplicados y es necesario revisar al detalle cu√°l es el original (gastando tiempo y energ√≠as)
---
class: middle, center, inverse

# _¬øC√≥mo utilizar el control de versiones?_
---
# Git: un software de control de versiones

> Git es una **herramienta** para el control de versiones que permite **registrar y organizar** los cambios en documentos y datos a lo largo del tiempo. En investigaci√≥n social, **facilita la colaboraci√≥n** entre equipos, el rastreo de modificaciones en c√≥digos de an√°lisis o textos acad√©micos, y la reproducci√≥n transparente de resultados.

.left-column[
- Es una especie de memoria o registro local que guarda informaci√≥n sobre: qu√© cambio se hizo, qui√©n lo hizo y cu√°ndo lo hizo.

- Mantiene la informaci√≥n de todos los cambios en la historia de la carpeta/repositorio local.

- Se puede sincronizar con repositorio remoto (ej. Github o Gitlab).
]
.right[![:scale 30%](images/git.png)]

---

# Github: una plataforma colaborativa

> GitHub es una **plataforma** de desarrollo colaborativo basada en Git que permite **alojar repositorios**, gestionar el control de versiones y facilitar la colaboraci√≥n en proyectos de software y otros tipos de documentos. **Ofrece herramientas** para compartir c√≥digo, coordinar equipos, hacer revisiones de cambios y automatizar flujos de trabajo.

.left-column[
- Red social de c√≥digo. Pensada para desarrolladores, pero utilizada por personas de m√∫ltiples disciplinas.

- Alberga miles de repositorios p√∫blicos. Fomenta el c√≥digo abierto, la transparencia y la reproducibilidad.

- Guarda la carpeta de trabajo en una "nube".
]
.right[![:scale 30%](images/github.png)]

---
# Git ‚â† Github

.left-column[
.center[![:scale 40%](images/git.png)] 

.left[‚úÖ Git es un sistema de control de versiones distribuido que se utiliza de manera local (en el propio computador)]
]

.right-column[
.center[![:scale 40%](images/github.png)]

.right[‚úÖ GitHub es un servicio en la nube que permite almacenar repositorios Git y colaborar en ellos con otras personas.]
]

---
# Ejemplo Git

![](images/git-console.png)
---
# Ejemplo Github

![:scale 85%](images/github-page.png)

---
# Git y Rstudio

**¬°IMPORTANTE!**

- Git es el software que hace el trabajo de llevar el control de versiones y funciona a trav√©s de comandos en consola. Trabajar en √©l puede ser un poco cr√≠ptico al principio.

- Es recomendable trabajar con alguna GUI _(Interfaz Gr√°fica de Usuario)_ para facilitar su uso

- Existen varias GUI para utilizar Git, nosotros utilizaremos las funciones que ofrece Rstudio (algo limitadas, pero cubren gran parte de lo que uno necesita).

![:scale 20%](images/rstudio-logo.png)
![:scale 20%](images/git.png)



---
# Conceptos centrales

## 1. Repositorio _(Repository)_

- Es el espacio donde se almacenan todos los archivos, su historial de cambios y las configuraciones del proyecto. **Puede ser local (en el computador propio) o remoto (en plataformas como Github).**

- En concreto, es equivalente a una carpeta del computador.

- El contenido de la carpeta puede variar dependiendo del alcance del proyecto y de las tareas. Un repositorio puede ser una parte del procesamiento de datos, un paper/informe o un proyecto entero (ej. Fondecyt).

---
# Conceptos centrales

## 1. Repositorio _(Repository)_

### ‚ùó Primero veremos como inicializar un repositorio local a trav√©s de RStudio.

### ‚è© M√°s adelante, cuando veamos el concepto de _Repositorio remoto_, veremos como inicializar un repositorio conectado a Github.
---
## Inicializar un repositorio local en Rstudio

Project > New project

.center[![:scale 63%](images/rstudio1.png)]
---
## Inicializar un repositorio local en Rstudio

Project > New project > New directory

.center[![:scale 63%](images/rstudio2.png)]
---
## Inicializar un repositorio local en Rstudio

Escoger nombre carpeta, ubicaci√≥n y activar casilla _Create a git directory_

.center[![:scale 63%](images/rstudioa.png)]
---
## Inicializar un repositorio local en Rstudio

Aparecen botones asociados a Git:

.center[![:scale 63%](images/rstudiob.png)]
---
## (Parentesis: configuraci√≥n inicial)

La primera vez que utilicemos Git, tenemos que especificar las credenciales. Si no lo hacemos, probablemente las pida m√°s adelante.

Para esto, hay que usar la Terminal. Para acceder a ella en RStudio:

> Tools $\rightarrow$ Terminal $\rightarrow$ New Terminal (`Alt+Shift+R`)

Aqu√≠ escribir las credenciales de su cuenta de Github.

```{r echo=TRUE,eval=F}
git config --global user.email "usuario2021@gmail.com" 
git config --global user.name "nombreusuario"
```
---
# Conceptos centrales

## 2. Confirmaciones _(Commits)_

Cada _commit_ es una "foto" del estado del proyecto en un momento espec√≠fico. Incluye:

- ‚úÖ Los archivos y cambios realizados.
- ‚úÖ Un identificador √∫nico (hash SHA-1).
- ‚úÖ Un mensaje descriptivo sobre el cambio.
---
# Conceptos centrales

## 3. √Årea de preparaci√≥n _(Staging Area / Index)_

- Es un espacio intermedio donde seleccionamos los cambios que queremos incluir en el pr√≥ximo _commit_. 

- Se puede pensar como lo que tenemos "arriba del escritorio/escenario" para ser revisado.

`git add archivo.R` ‚Üí Mueve el archivo al _staging area_.

`git commit -m "Descripci√≥n del cambio"` ‚Üí Guarda los cambios en el historial.

---
## _Stage_ y _Commit_ en Rstudio

Tenemos archivos nuevos o con cambios.

.center[![:scale 63%](images/rstudioc.png)]

---
## _Stage_ y _Commit_ en Rstudio

Al hacer click en _Stage_ lo estamos "subiendo al escenario"

.center[![:scale 63%](images/rstudiod.png)]

---
## _Stage_ y _Commit_ en Rstudio

Al hacer click en _Commit_ se abre una ventana para revisar los cambios e introducir mensaje:

.center[![:scale 63%](images/rstudioe.png)]

---
## _Stage_ y _Commit_ en Rstudio

Al hacer click en _Commit_ se deber√≠a ver algo como esto:

.center[![:scale 63%](images/rstudiof.png)]

---
# Conceptos centrales
## 4. Repositorios remotos _(Remotes)_

- El trabajo con un repositorio local es √∫til para tener un historial propio, pero la funcionalidad m√°s potente de Git es la facilidad que da para la colaboraci√≥n. 
- Git entrega esta facilidad a trav√©s de la sincronizaci√≥n entre repositorios locales y remotos.

- Existen distintas formas de conectar con el repositorio remoto, dependiendo del estado del trabajo. Las principales son: 

1. Nuevo proyecto, Github primero
2. Proyecto existente, Github primero
3. Proyecto existente, Github al final

---
# Conceptos centrales
## 4. Repositorios remotos _(Remotes)_

- El trabajo con un repositorio local es √∫til para tener un historial propio, pero la funcionalidad m√°s potente de Git es la facilidad que da para la colaboraci√≥n. 
- Git entrega esta facilidad a trav√©s de la sincronizaci√≥n entre repositorios locales y remotos.

- Existen distintas formas de conectar con el repositorio remoto, dependiendo del estado del trabajo. Las principales son: 

1. **Nuevo proyecto, Github primero ‚Üí ¬°Esta es la que veremos aqu√≠!** ‚úÖ
2. Proyecto existente, Github primero
3. Proyecto existente, Github al final

---
# Conceptos centrales
## 4. Repositorios remotos _(Remotes)_

- El repositorio remoto es una suerte de nube del cual subimos y bajamos cambios recurrentemente (nuestros o de otros miembros del equipo)

- Los comandos principales son:

`git push` ‚Üí Enviar cambios al repositorio remoto.

`git pull` ‚Üí Descargar cambios desde el repositorio remoto.

---
.center[![](images/git-flow.png)]
---
## Crear repositorio remoto desde Github

En Github, ir al perfil propio y hacer click en bot√≥n verde "New".

.center[![:scale 80%](images/new_repo.png)]

---
## Crear repositorio remoto desde Github

.left-column[Introducir la informaci√≥n del repositorio:

- _**Repository template:**_ no es necesario por ahora
- _**Repository name:**_ escoger un nombre (sin espacios)
- _**Description:**_ descripci√≥n breve del repositorio
- _**Public o Private:**_ p√∫blico (a menos que haya una raz√≥n para dejarlo privado)
- _**Add a README file:**_ marcar casilla
- _**Add .gitignore:**_ R (a menos que se use otro programa)
- _**Choose a license:**_ ninguna

Apretar bot√≥n verde "Create repository"
]
.right[![:scale 40%](images/new_repo2.png)]
---
## Crear repositorio remoto desde Github

As√≠ se ver√° el repo creado:

.center[![:scale 80%](images/new_repo3.png)]
---
## Clonar repositorio remoto

Code > HTTPS > Copiar URL

.center[![:scale 80%](images/clone_repo.png)]
---
## Clonar repositorio remoto

RStudio > New project > Version control

.center[![:scale 63%](images/clone_repo2.png)]

---
## Clonar repositorio remoto

RStudio > New project > Version control > Git > Pegar URL > Create project

.center[![:scale 63%](images/clone_repo3.png)]

---
## Hacer cambios, commit, pull, push

Crear/modificar archivos > _stage_ > _commit_

.center[![:scale 63%](images/clone_repo4.png)]

---
## Hacer cambios, commit, pull, push

Hacer pull (‚¨á) de los cambios en el remoto. En este caso, todo al d√≠a.

.center[![:scale 63%](images/git-pull.png)]

---
## Hacer cambios, commit, pull, push

Hacer push (‚¨Ü) de los commits realizados

.center[![:scale 63%](images/clone_repo5.png)]
---
## Hacer cambios, commit, pull, push

Si solicita autorizaci√≥n, entrar a trav√©s del navegador con las credenciales Github (o Token).

.center[![:scale 63%](images/clone_repo6.png)]
---
## Hacer cambios, commit, pull, push

Un push exitoso se deber√≠a ver asi:

.center[![:scale 63%](images/clone_repo7.png)]

---
# Conceptos centrales
## 5. Ramas _(Branches)_

- Son l√≠neas independientes de desarrollo o an√°lisis que permiten trabajar en nuevas caracter√≠sticas o exploraciones sin afectar la versi√≥n principal.

- Existe la rama principal (_main/master_) y ramas alternativas.

`git branch nueva_rama` ‚Üí Crea una nueva rama.

`git checkout nueva_rama` ‚Üí Cambia a la nueva rama.

.right[![](images/branch.png)]
---
![](images/versioncontrol3.png)
---
# Conceptos centrales
## 5. Ramas _(Branches)_

Las ramas se pueden:

- ‚úÖ Crear remoto y luego descargar con un pull (‚¨á)

- ‚úÖ Crear local y luego subir con un push (‚¨Ü)
---
## Rama en remoto y luego pull (‚¨á)

En Github, hacer click en main, luego escribir nombre de rama y apretar "_Create banch_ [nombre rama] _from main_"

.center[![:scale 63%](images/rama1.png)]

---
## Rama en remoto y luego pull (‚¨á)

Se ver√° as√≠:

.center[![:scale 63%](images/rama2.png)]

---
## Rama en remoto y luego pull (‚¨á)

Ir a RStudio y hacer pull (‚¨á):

.center[![:scale 63%](images/rama3.png)]

---
## Rama local y hacer push (‚¨Ü)

En RStudio, bot√≥n morado y escribir nombre rama. En _Remote:_ debe decir _origin_. Click en crear.

.center[![:scale 63%](images/rama4.png)]

---
## Rama local y hacer push (‚¨Ü)

Si solicita autorizaci√≥n, utilizar credenciales o token Github.

.center[![:scale 63%](images/rama5.png)]

---
## Rama local y hacer push (‚¨Ü)

Se deber√≠a ver as√≠:

.center[![:scale 63%](images/rama6.png)]

---
## Rama local y hacer push (‚¨Ü)

En Github aparecer√° la nueva rama:

.center[![:scale 60%](images/rama7.png)]

---
# Conceptos centrales
## 6. Fusionar cambios _(Merge y Rebase)_

Cuando trabajamos con ramas, necesitamos combinarlas. Hay dos opciones:

`git merge` ‚Üí Une los cambios de una rama a otra a trav√©s de un _commit_.

`git rebase` ‚Üí Reaplica cambios de una rama sobre otra para mantener un historial m√°s limpio.

üí° **Al comenzar a utilizar Git, es suficiente trabajar con _merge_. En proyectos m√°s complejos puede ser √∫til el _rebase_.**
---
# Ejemplo de historial (con muchos _merge_)

![](images/ejemplo-enut.png)
---
.center[![:scale 50%](images/gits.jfif)]
---
## Fusionar por _merge_ _(pull request)_ desde Github

En la branch creada (en este caso rama-prueba2) hacer cambios, stage, commit, pull, push.

.center[![:scale 63%](images/merge1.png)]

---
## Fusionar por _merge_ _(pull request)_ desde Github

Ir a Github, hacer click en "Compare & pull request". Esto es para abrir una solicitus de _merge_ entre la _main_ y la _rama-prueba2_.

.center[![:scale 65%](images/merge2.png)]
---
## Fusionar por _merge_ _(pull request)_ desde Github

A√±adir informaci√≥n relevante respecto a la solicitud _(pull request)_. Por defecto el t√≠tulo es el nombe del √∫ltimo commit. Hacer click en "Create pull request".

.center[![:scale 58%](images/merge3.png)]

---
## Fusionar por _merge_ _(pull request)_ desde Github

Solicitud creada _(pull request)_. Aqui se puede interactuar con los miembros del equipo, revisar los cambios etc. Para aceptar la solicitud hacer clik en "Merge pull request".

.center[![:scale 48%](images/merge4.png)]

---
## Fusionar por _merge_ _(pull request)_ desde Github

Al aceptar la solicitud se ver√° as√≠:

.center[![:scale 51%](images/merge5.png)]

---
## Fusionar por _merge_ _(pull request)_ desde Github

Y en Github se ver√° as√≠:

.center[![:scale 70%](images/merge6.png)]

---
# Conceptos centrales
## 7. Merge conflict

Un merge conflict ocurre cuando Git no puede fusionar autom√°ticamente los cambios de dos ramas porque afectan la misma l√≠nea de un archivo de manera diferente. Git necesita ayuda para decidir cu√°l versi√≥n conservar.

.center[![](images/merge-conflict.png)]

---
# Conceptos centrales
## 7. Merge conflict

.center[![](images/merge-conflict1.png)]

---
# Ejemplo de un merge conflict

Supongamos que tenemos una rama _main_ y creamos una nueva rama _experimento_.

1Ô∏è‚É£ En la rama _main_, editamos un archivo y hacemos un commit:

```{r eval=FALSE, include=TRUE}
# archivo.txt
Este es un ejemplo de Git.
```


2Ô∏è‚É£ En la rama _experimento_, editamos la misma l√≠nea de manera diferente:

```{r eval=FALSE, include=TRUE}
# archivo.txt
Este es un ejemplo de control de versiones en Git.
```

---

# Ejemplo de un merge conflict

3Ô∏è‚É£ Intentmos fusionar experimento en _main_:

üì¢ **¬°Conflicto detectado! Git no puede decidir qu√© versi√≥n usar, y el archivo queda as√≠:**

```{r eval=FALSE, include=TRUE}
# archivo.txt
<<<<<<< HEAD
Este es un ejemplo de Git.
=======
Este es un ejemplo de control de versiones en Git.
>>>>>>> experimento
```

Los s√≠mbolos a continuaci√≥n se conocen como "marcadores de conflicto":
```
<<<<<<< HEAD
=======
>>>>>>>
```

---

# C√≥mo resolver un merge conflict
Tenemos que editar el archivo manualmente y decidir qu√© versi√≥n mantener:

‚úÖ Podemos elegir una de las versiones o combinarlas. Es necesario eliminar los marcadores de conflicto.

```{r eval=FALSE, include=TRUE}
# archivo.txt
Este es un ejemplo de control de versiones en Git.
```

‚úÖ Luego, hacemos stage y commit:

`git add archivo.txt`

`git commit -m "Resuelto conflicto en archivo.txt"`

üí° **¬°Listo!**

---
# Consejos para evitar conflictos

üîπ **Sincronizar antes de editar:** Descargar cambios con pull (‚¨á) antes de modificar o crear archivos en una rama compartida.

üîπ **Dividir cambios en ramas peque√±as:** As√≠ se reduce la probabilidad de conflictos grandes.

üîπ **Usar herramientas de comparaci√≥n:** Editores como VS Code o GitKraken ayudan a resolver conflictos visualmente.
---
# Conceptos centrales
## 8. HEAD

En Git, `HEAD` es un puntero especial que se√±ala al commit actual en el que est√°s trabajando. Es como un marcador que indica en qu√© parte del historial de versiones te encuentras.

.left-column[

#### Atached state (normal)

![](images/head1.png)

]

.right-column[

#### Detached state

![](images/head2.png)
]
---
## Estados de HEAD

1Ô∏è‚É£ `HEAD` apunta a la √∫ltima confirmaci√≥n (commit) de la rama actual

En un flujo normal de trabajo, `HEAD` apunta al √∫ltimo commit de la rama activa.

```{r eval=FALSE, include=TRUE}
A - B - C (HEAD -> main)
```

Aqu√≠, `HEAD` est√° en C, que es el √∫ltimo commit de la rama main.

---

## Estados de HEAD

2Ô∏è‚É£ `HEAD` cambia cuando haces un commit

Si agregas un nuevo commit (D), `HEAD` se mover√° autom√°ticamente a √©l:

`git commit -m "Nuevo commit"`

```{r eval=FALSE, include=TRUE}

A - B - C - D (HEAD -> main)
```

---
## Estados de HEAD

3Ô∏è‚É£ `HEAD` en un estado "desasociado" (detached `HEAD`)

Si `HEAD` apunta a un commit en lugar de una rama, est√°s en un estado desasociado.

`git checkout C`

Ahora `HEAD` apunta directamente al commit C, sin estar en una rama espec√≠fica:

```{r eval=FALSE, include=TRUE}
A - B - C (HEAD) - D (main)
```
‚ùó **Advertencia: En este estado, si se hacen cambios y commits, estos podr√≠an perderse si no se guardan en una nueva rama.**

Para volver a una rama normal:

`git checkout main`

---
# Conceptos centrales
## 9. Historial y deshacer cambios _(History, revert, reset)_

Git permite inspeccionar el historial y corregir errores.

`git log` ‚Üí Muestra el historial de commits.

`git revert` ‚Üí Revierte un commit sin eliminarlo del historial.

`git reset` ‚Üí Borra commits o deshace cambios en el √°rea de preparaci√≥n.

üí°**RStudio no tiene botones asociados al _revert_ y el _reset_, por lo que se debe hacer en la Terminal (o cambiarse a otra GUI).**

---
## Revert v/s reset
.center[![:scale 48%](images/rev.svg)]
---
## Git revert

1Ô∏è‚É£ git revert (forma segura)

Imaginemos que tenemos el siguiente historial de commits:

```{r eval=FALSE, include=TRUE}
A - B - C - D (HEAD)
```

Si queremos revertir el commit C, usamos:

`git revert C`

Esto crear√° un nuevo commit E que revierte los cambios de C sin alterar el historial:

```{r eval=FALSE, include=TRUE}
A - B - C - D - E (HEAD)
```
üí° **√ötil cuando se trabaja en equipo y no se quiere borrar commits del historial.**
---
## Git reset

2Ô∏è‚É£ git reset (modifica el historial)

Tenemos:

```{r eval=FALSE, include=TRUE}
A - B - C - D (HEAD)
```

Si queremos eliminar los commits C y D, usamos:

`git reset --hard B`

Esto mueve HEAD a B, eliminando los commits C y D:

```{r eval=FALSE, include=TRUE}
A - B (HEAD)
```

‚ùó **Cuidado: `--hard` borra definitivamente los cambios. No se pueden recuperar f√°cilmente.**
---
## Tipos de reset

| Tipo | ¬øModifica el historial? | ¬øPreserva cambios en el √°rea de staging (`git add`)? | ¬øPreserva cambios en el directorio de trabajo? |
|------|------------------------|-----------------------------------|----------------------------|
| **`--soft`** | ‚úÖ S√≠ | ‚úÖ S√≠ | ‚úÖ S√≠ |
| **`--mixed`** (por defecto) | ‚úÖ S√≠ | ‚ùå No (deshace `git add`) | ‚úÖ S√≠ |
| **`--hard`** | ‚úÖ S√≠ | ‚ùå No | ‚ùå No |

---
## ¬øCu√°ndo usar cada uno?

| Tipo de `git reset` | ¬øQu√© hace? | ¬øCu√°ndo usarlo? | ¬øSe puede en un repo compartido? |
|---------------------|------------|----------------|----------------------------------|
| **`--soft`**  | Retrocede un commit pero mantiene cambios en staging y el directorio de trabajo. | Cuando solo quieres modificar el √∫ltimo commit sin perder los cambios. | ‚úÖ S√≠, si no has hecho `push`. |
| **`--mixed`** (por defecto) | Retrocede un commit y quita los cambios de staging, pero los mantiene en el directorio de trabajo. | Si agregaste archivos con `git add` por error y quieres corregir antes de hacer commit. | ‚úÖ S√≠, si no has hecho `push`. |
| **`--hard`** | Retrocede un commit y borra los cambios del directorio de trabajo y staging. | Si quieres descartar completamente los cambios sin recuperarlos. | ‚ùå No, podr√≠a causar conflictos si ya hiciste `push`. |

---

# Aplicando lo aprendido
## Parte I: creando un repositorio local

1. ‚¨ú En Rstudio, crear un repositorio local con el nombre "taller-git-local".
2. ‚¨ú Crear archivo que se llame "archivo_prueba.R" y escribir un comentario en √©l.
3. ‚¨ú A√±adir los cambios al _stage area_.
4. ‚¨ú Hacer commit de los cambios.

---

# Aplicando lo aprendido
## Parte I: creando un repositorio local

1. ‚úÖ En Rstudio, crear un repositorio local con el nombre "taller-git-local".
2. ‚úÖ Crear archivo que se llame "archivo_prueba.R" y escribir un comentario en √©l.
3. ‚úÖ A√±adir los cambios al _stage area_.
4. ‚úÖ Hacer commit de los cambios.

---

# Aplicando lo aprendido
## Parte II: remoto

1. ‚¨ú En Github, crear un repositorio remoto con el nombre "taller-git-remoto".
2. ‚¨ú Copiar el URL HTTPS del repositorio.
3. ‚¨ú En RStudio, clonar el repositorio remoto via HTTPS.
4. ‚¨ú Crear un archivo que se llamo "archivo_prueba.R" y escribir un comentario en √©l.
5. ‚¨ú A√±adir los cambios en el _stage area_.
6. ‚¨ú Hacer commit de los cambios.
7. ‚¨ú Hacer pull.
8. ‚¨ú Hacer push.
9. ‚¨ú En Github, revisar los cambios.

---

# Aplicando lo aprendido
## Parte II: remoto

1. ‚úÖ En Github, crear un repositorio remoto con el nombre "taller-git-remoto".
2. ‚úÖ Copiar el URL HTTPS del repositorio.
3. ‚úÖ En RStudio, clonar el repositorio remoto via HTTPS.
4. ‚úÖ Crear un archivo que se llamo "archivo_prueba.R" y escribir un comentario en √©l.
5. ‚úÖ A√±adir los cambios en el _stage area_.
6. ‚úÖ Hacer commit de los cambios.
7. ‚úÖ Hacer pull.
8. ‚úÖ Hacer push.
9. ‚úÖ En Github, revisar los cambios.

---

# Aplicando lo aprendido
## Parte III: branches

1. ‚¨ú En Github, crear una branch llamada "branch1" desde el remoto.
2. ‚¨ú En Rstudio, hacer pull de "branch1".
3. ‚¨ú En Rstudio, crear una branch llamada "branch2" conectada con el remoto.
4. ‚¨ú En Github, revisar que existan las branches: main, branch1 y branch2.

---

# Aplicando lo aprendido
## Parte III: branches

1. ‚úÖ En Github, crear una branch llamada "branch1" desde el remoto.
2. ‚úÖ En Rstudio, hacer pull de "branch1".
3. ‚úÖ En Rstudio, crear una branch llamada "branch2" conectada con el remoto.
4. ‚úÖ En Github, revisar que existan las branches: main, branch1 y branch2.

---

# Aplicando lo aprendido
## Parte IV: merge (pull request)

1. ‚¨ú En RStudio, ir a "branch2".
2. ‚¨ú Crear un archivo "nuevo_archivo2.R" y a√±adir un comentario.
3. ‚¨ú Hacer stage, commit, pull, push.
4. ‚¨ú En Github, crear solicitud de pull request.
5. ‚¨ú Aceptar solicitud de pull request.
6. ‚¨ú Revisar main que los cambios se hayan incorporado correctamente.

---

# Aplicando lo aprendido
## Parte IV: merge (pull request)

1. ‚úÖ En RStudio, ir a "branch2".
2. ‚úÖ Crear un archivo "nuevo_archivo2.R" y a√±adir un comentario.
3. ‚úÖ Hacer stage, commit, pull, push.
4. ‚úÖ En Github, crear solicitud de pull request.
5. ‚úÖ Aceptar solicitud de pull request.
6. ‚úÖ Revisar main que los cambios se hayan incorporado correctamente.

---
## Bonus I: merge conflict

1. ‚¨ú En RStudio, aseg√∫rate de estar en la rama _main_. Luego, anda a "nuevo_archivo.R" y escribe el siguiente comentario en la primera linea de c√≥digo: "Esto es un comentario desde la main".
2. ‚¨ú Hace stage, commit, pull, push.
3. ‚¨ú En RStudio, ve la branch1 (tambi√©n puedes hacerlo desde la terminal con `git checkout branch1`). En el archivo "nuevo_archivo.R" escribe el siguiente comentario en la primera linea de c√≥digo: "Esto es un comentario desde la branch1".
4. ‚¨ú Hace stage, commit, pull, push.
5. ‚¨ú En Rstudio, ve a la branch main (tambi√©n puedes hacerlo desde la terminal con `git checkout main`).
6. ‚¨ú En la Terminal, escribe `git merge branch1`.
7. ‚¨ú Resuelve manualmente el conflicto en el archivo "nuevo archivo.R".
8. ‚¨ú En la Terminal, escribe `git add nuevo_archivo.R`, luego `git commit -m "Resolver conflicto` y finalmente `git push`.
---
## Bonus I: merge conflict

1. ‚úÖ En RStudio, aseg√∫rate de estar en la rama _main_. Luego, anda a "nuevo_archivo.R" y escribe el siguiente comentario en la primera linea de c√≥digo: "Esto es un comentario desde la main".
2. ‚úÖ Hace stage, commit, pull, push.
3. ‚úÖ En RStudio, ve la branch1 (tambi√©n puedes hacerlo desde la terminal con `git checkout branch1`). En el archivo "nuevo_archivo.R" escribe el siguiente comentario en la primera linea de c√≥digo: "Esto es un comentario desde la branch1".
4. ‚úÖ Hace stage, commit, pull, push.
5. ‚úÖ En Rstudio, ve a la branch main (tambi√©n puedes hacerlo desde la terminal con `git checkout main`).
6. ‚úÖ En la Terminal, escribe `git merge branch1`.
7. ‚úÖ Resuelve manualmente el conflicto en el archivo "nuevo archivo.R".
8. ‚úÖ En la Terminal, escribe `git add nuevo_archivo.R`, luego `git commit -m "Resolver conflicto` y finalmente `git push`.

---

## Bonus II: revert

1. ‚¨ú En Rstudio, en la main, crea un nuevo script de c√≥digo y escribe un comentario en √©l.
2. ‚¨ú Hace stage, commit, pull y push.
3. ‚¨ú En la Terminal, escribe `git revert HEAD`. 
4. ‚¨ú Se abrir√° el editor de mensaje en la Terminal. Tecla Esc > Escribir :wq y luego tecla Enter.
5. ‚¨ú En la Terminal, escribe `git push`.
6. ‚¨ú Ve a Github a revisar el commit de reversi√≥n.

---

## Bonus II: revert

1. ‚úÖ En Rstudio, en la main, crea un nuevo script de c√≥digo y escribe un comentario en √©l.
2. ‚úÖ Hace stage, commit, pull y push.
3. ‚úÖ En la Terminal, escribe `git revert HEAD`. 
4. ‚úÖ Se abrir√° el editor de mensaje en la Terminal. Tecla Esc > Escribir :wq y luego tecla Enter.
5. ‚úÖ En la Terminal, escribe `git push`.
6. ‚úÖ Ve a Github a revisar el commit de reversi√≥n.

---

# Recursos

## M√°s sobre ciencia abierta...

- Curso JC Castillo  ["Ciencia Social Abierta" 2021"](https://cienciasocialabierta.netlify.app/)
- P√°gina web ["Laboratorio Ciencia Social Abierta" (LISA)](https://lisa-coes.netlify.app/)
- Escuela Invierno ELSOC 2024: [Investigaci√≥n Reproducible](https://www.youtube.com/watch?v=-pPmtz29vZ8)

## M√°s sobre Git...

- Clase INE ["Git para usuarios de R"](https://www.youtube.com/watch?v=S-PzhB_-FKc)
- Libro ["Happy Git for the useR"](https://happygitwithr.com/) (ingl√©s)
- [Tutorial interactivo Git](https://learngitbranching.js.org/) (ingl√©s)
- [Git Cheatsheet](https://education.github.com/git-cheat-sheet-education.pdf) (ingl√©s)
---
class: middle, center, inverse

### ¬°Muchas gracias! 




